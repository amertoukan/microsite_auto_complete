<!--
    This will listen to an email param and place its findings into the email field on the registration page.
-->
<script>
function waitForInputField() {
    return new Promise(function (resolve, reject) {
        waitForElementToDisplay(200);
        function waitForElementToDisplay(time) {
            const query1 = 
            { 
                 if_statement: document.querySelector('sqm-portal-registration-form')?.shadowRoot.querySelector('sl-form')?.querySelector('sl-input'),
                do_this: (document.querySelector('sqm-portal-registration-form')?.shadowRoot.querySelector('sl-form')?.querySelector('sl-input'))

            }
console.log("here. ", query1.if_statement)
            if (query1.if_statement) {
               resolve(query1.do_this)
            }
            else {
                setTimeout(function () {
                    waitForElementToDisplay(time);
                }, time);
            }
        }
    });
}

waitForInputField().then(inputField => {
    const queryParams = new URLSearchParams(window.location.search);
    const referralCode = queryParams.get("rsCode");
    console.log(inputField)
    inputField.value = referralCode
})
</script>