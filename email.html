<!--
    This will listen to an email param and place its findings into the email field on the registration page.
-->
<link rel="icon" type="image/x-icon" href="https://res.cloudinary.com/saasquatch/image/upload/v1657818643/squatch-assets/SaaSquatchLogo.png">


<script>
function waitForInputField() {
    return new Promise(function (resolve, reject) {
        waitForElementToDisplay(200);
        function waitForElementToDisplay(time) {
            const email = 
            { 
                 if_statement: document.querySelector('sqm-portal-registration-form')?.shadowRoot.querySelector('sl-form')?.querySelector('sl-input'),
                do_this: (document.querySelector('sqm-portal-registration-form')?.shadowRoot.querySelector('sl-form')?.querySelector('sl-input'))
            }
console.log("here. ", email.if_statement)
            if (email.if_statement) {
               resolve(email.do_this)
            }
            else {
                setTimeout(function () {
                    waitForElementToDisplay(time);
                }, time);
            }
        }
    });
}

waitForInputField().then(inputField => {
    const queryParams = new URLSearchParams(window.location.search);
    const email = queryParams.get("email");
    inputField.value = email;
})
</script>